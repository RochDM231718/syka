{% extends 'layout.html' %}
{% set title = gettext('admin.users.edit_user_title')+" - "+user.first_name+" "+user.last_name %}
{% block content %}
<form method="post" action="{{ url_for('admin.users.update', id=user.id) }}" class="row" enctype="multipart/form-data">
      <div class="col-12">
          <a href="{{ url_for('admin.dashboard') }}" class="btn btn-light ms-2 rounded-3 float-end">{{ gettext('admin.back') }}</a>
          <button type="submit" class="btn btn-primary rounded-3 float-end">{{ gettext('admin.save') }}</button>
      </div>

     <div class="col-12 mb-4 text-center">
         <div class="d-flex justify-content-center align-items-center flex-column">
             {% if user.avatar_path %}
                <img src="/{{ user.avatar_path }}" alt="Avatar" class="rounded-circle mb-3" style="width: 150px; height: 150px; object-fit: cover; border: 3px solid #eee;">
             {% else %}
                <div class="rounded-circle mb-3 bg-secondary d-flex align-items-center justify-content-center text-white" style="width: 150px; height: 150px; font-size: 3rem;">
                    {{ user.first_name[0] }}{{ user.last_name[0] }}
                </div>
             {% endif %}

             <div class="col-md-4">
                 <label for="avatar" class="form-label">Change Avatar</label>
                 <input type="file" name="avatar" class="form-control" id="avatar" accept="image/*">
             </div>
         </div>
     </div>

     <div class="col-6">
         <div class="form-group">
                <label for="first_name" class="form-label">{{ gettext('admin.users.first_name') }}</label>
                <input type="text" value="{{ user.first_name }}" name="first_name" class="form-control" id="first_name">
         </div>
     </div>
      <div class="col-6">
         <div class="form-group">
                <label for="last_name" class="form-label">{{ gettext('admin.users.last_name') }}</label>
                <input type="text" value="{{ user.last_name }}" name="last_name" class="form-control" id="last_name">
         </div>
     </div>
     <div class="col-6">
         <div class="form-group">
                <label for="email" class="form-label">{{ gettext('admin.users.email') }}</label>
                <input type="email" value="{{ user.email }}" name="email" class="form-control" id="email">
         </div>
     </div>
     <div class="col-6">
         <div class="form-group">
                <label for="phone_number" class="form-label">{{ gettext('admin.users.phone') }}</label>
                <input type="text" value="{{ user.phone_number }}" name="phone_number" class="form-control" id="phone_number">
         </div>
     </div>

     <div class="col-6">
         <div class="form-group">
                <label for="role" class="form-label">{{ gettext('admin.users.role') }}</label>
                <input type="text" value="{{ user.role.value | replace('_', ' ') | title }}" class="form-control" disabled>
         </div>
     </div>
 </form>
{% endblock %}